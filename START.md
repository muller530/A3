# 启动指南

## 问题：端口 1420 被占用

如果遇到 "Port 1420 is already in use" 错误，按以下步骤解决：

### 方法 1：自动停止占用端口的进程

```bash
# 查找并停止占用 1420 端口的进程
lsof -ti:1420 | xargs kill

# 或者使用更强制的方式
kill -9 $(lsof -ti:1420)
```

### 方法 2：手动查找并停止

```bash
# 查找占用端口的进程
lsof -i:1420

# 根据输出的 PID，停止进程
kill <PID>
```

### 方法 3：修改端口（如果不想停止其他进程）

修改 `vite.config.ts` 中的端口号：

```typescript
server: {
  port: 1421,  // 改为其他端口
  // ...
}
```

同时修改 `src-tauri/tauri.conf.json` 中的 `devUrl`：

```json
{
  "build": {
    "devUrl": "http://localhost:1421"
  }
}
```

## 正常启动流程

1. **确保端口空闲**：
   ```bash
   lsof -ti:1420 || echo "端口空闲"
   ```

2. **启动 Tauri 开发服务器**：
   ```bash
   npm run tauri dev
   ```

3. **等待编译完成**：
   - 首次运行需要编译 Rust 依赖（可能需要 5-10 分钟）
   - 后续运行会快很多

4. **查看输出**：
   - Vite 开发服务器启动在 `http://localhost:1420`
   - Rust 编译完成后会打开桌面应用窗口

## 常见问题

### 问题 1：Rust 编译很慢
- **原因**：首次编译需要下载和编译所有依赖
- **解决**：耐心等待，后续会快很多
- **加速**：已配置中科大镜像源（`.cargo/config.toml`）

### 问题 2：编译错误
- **检查**：查看终端错误信息
- **常见原因**：
  - 网络问题（依赖下载失败）
  - Rust 工具链版本过旧
  - 配置文件格式错误

### 问题 3：窗口没有打开
- **检查**：查看终端是否有错误
- **尝试**：手动访问 `http://localhost:1420` 查看前端是否正常

