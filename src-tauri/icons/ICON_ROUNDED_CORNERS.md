# macOS 图标圆角说明

## macOS 图标圆角机制

macOS 系统会**自动**为应用图标添加圆角效果，但需要满足以下条件：

### 1. 图标设计要求

✅ **正确做法**：
- 图标内容应**居中**，四周留出 **10-20% 的边距**
- 图标内容不要填满整个画布
- 背景可以是透明或纯色

❌ **错误做法**：
- 图标内容填满整个画布（没有边距）
- 图标本身已经做了圆角处理（系统会再次添加圆角，导致双重圆角）

### 2. 为什么看不到圆角？

可能的原因：

1. **图标内容填满了画布**
   - 如果图标内容延伸到边缘，系统添加圆角时会裁剪掉边缘内容
   - 看起来就像没有圆角

2. **图标本身已经做了圆角**
   - 如果源图标已经是圆角矩形，系统再次添加圆角可能导致显示异常

3. **图标尺寸问题**
   - 确保图标是正方形（如 1024x1024）
   - 确保是 RGBA 格式

### 3. 如何检查图标

```bash
cd src-tauri/icons

# 查看图标尺寸和格式
file icon.png
magick identify icon.png

# 查看图标内容是否居中（需要手动检查）
open icon.png
```

### 4. 如何修复

如果图标没有圆角效果，需要：

1. **重新设计图标**：
   - 确保图标内容居中
   - 四周留出 10-20% 的边距
   - 例如：2048x2048 的画布，图标内容应该在 1600x1600 左右

2. **重新生成 .icns 文件**：
   ```bash
   cd src-tauri/icons
   bash generate-icons.sh icon.png
   ```

3. **清理缓存**：
   ```bash
   # 清理 macOS 图标缓存
   sudo killall Finder
   sudo killall Dock
   ```

### 5. 验证圆角效果

1. 打包应用：`npm run tauri build`
2. 安装应用
3. 在 Finder 或 Dock 中查看图标
4. 系统会自动添加圆角效果

## 注意事项

- macOS 的圆角效果是**系统自动添加**的，不需要在图标文件中手动添加圆角
- 如果图标本身已经是圆角，系统可能会再次添加圆角，导致显示异常
- 最佳实践：图标内容居中，四周留边距，让系统自动处理圆角

